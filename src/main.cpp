#include <Arduino.h>
#include<GxEPD2_BW.h>
#include <Fonts/FreeMonoBold12pt7b.h>
#include <Fonts/FreeSans9pt7b.h>

const unsigned char smiley_bitmap[] PROGMEM = {
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x3F, 0xFC, 0x00, 0x00, 0x00,
    0x00, 0x01, 0xFF, 0xFF, 0x80, 0x00, 0x00,
    0x00, 0x07, 0xFF, 0xFF, 0xE0, 0x00, 0x00,
    0x00, 0x1F, 0x80, 0x01, 0xF8, 0x00, 0x00,
    0x00, 0x3E, 0x00, 0x00, 0x7C, 0x00, 0x00,
    0x00, 0x78, 0x00, 0x00, 0x1E, 0x00, 0x00,
    0x00, 0xF0, 0x00, 0x00, 0x0F, 0x00, 0x00,
    0x01, 0xE0, 0xC3, 0xC3, 0x07, 0x80, 0x00,
    0x03, 0xC0, 0xC3, 0xC3, 0x03, 0xC0, 0x00,
    0x07, 0x80, 0xC3, 0xC3, 0x01, 0xE0, 0x00,
    0x07, 0x80, 0xC3, 0xC3, 0x01, 0xE0, 0x00,
    0x0F, 0x00, 0x00, 0x00, 0x00, 0xF0, 0x00,
    0x0F, 0x00, 0x00, 0x00, 0x00, 0xF0, 0x00,
    0x1E, 0x00, 0x00, 0x00, 0x00, 0x78, 0x00,
    0x1E, 0x00, 0x00, 0x00, 0x00, 0x78, 0x00,
    0x1E, 0x00, 0x00, 0x00, 0x00, 0x78, 0x00,
    0x1E, 0x00, 0x00, 0x00, 0x00, 0x78, 0x00,
    0x1E, 0x18, 0x00, 0x00, 0x18, 0x78, 0x00,
    0x1E, 0x3C, 0x00, 0x00, 0x3C, 0x78, 0x00,
    0x0F, 0x3E, 0x00, 0x00, 0x7C, 0xF0, 0x00,
    0x0F, 0x0F, 0x00, 0x00, 0xF0, 0xF0, 0x00,
    0x07, 0x87, 0xC0, 0x03, 0xE1, 0xE0, 0x00,
    0x07, 0x83, 0xFF, 0xFF, 0xC1, 0xE0, 0x00,
    0x03, 0xC0, 0xFF, 0xFF, 0x03, 0xC0, 0x00,
    0x01, 0xE0, 0x1F, 0xF8, 0x07, 0x80, 0x00,
    0x00, 0xF0, 0x00, 0x00, 0x0F, 0x00, 0x00,
    0x00, 0x78, 0x00, 0x00, 0x1E, 0x00, 0x00,
    0x00, 0x3E, 0x00, 0x00, 0x7C, 0x00, 0x00,
    0x00, 0x1F, 0x80, 0x01, 0xF8, 0x00, 0x00,
    0x00, 0x07, 0xFF, 0xFF, 0xE0, 0x00, 0x00,
    0x00, 0x01, 0xFF, 0xFF, 0x80, 0x00, 0x00,
    0x00, 0x00, 0x3F, 0xFC, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
};


// define display
GxEPD2_BW<GxEPD2_579_GDEY0579T93, GxEPD2_579_GDEY0579T93::HEIGHT> display(
    GxEPD2_579_GDEY0579T93(5, 17, 16, 4) // cs, dc, rst, busy pins
);

void setup() {
    Serial.begin(115200);
    Serial.println("starting");

    display.init(115200);
    display.setRotation(0);

    display.setTextColor(GxEPD_BLACK);

    display.firstPage(); // clear

    do {
        display.fillScreen(GxEPD_WHITE);
        display.drawBitmap(50, 50, smiley_bitmap, 50, 34, GxEPD_BLACK); // x, y, image, width, height, colour

        display.setFont(&FreeMonoBold12pt7b);
        display.setCursor(150, 80);
        display.print("gashgahf askdh");

        display.setFont(&FreeSans9pt7b);
        display.setCursor(150, 110);
        display.print("free sans");




    } while (display.nextPage());

    Serial.println("updated");
}

void loop() {

    Serial.print("gah");
    delay(1000);

}